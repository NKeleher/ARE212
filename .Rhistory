tmp <- dir_haines %>% paste0("DS0004/02896-0004-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "nwtot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# Load Haines data -------------------------------------------------------------
# 1790
tmp <- dir_haines %>% paste0("DS0005/02896-0005-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "nwtot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# Load Haines data -------------------------------------------------------------
# 1790
tmp <- dir_haines %>% paste0("DS0006/02896-0006-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "nwtot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
setdiff(keep_v, names(tmp))
# Load Haines data -------------------------------------------------------------
# 1790
tmp <- dir_haines %>% paste0("DS0006/02896-0006-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# Load Haines data -------------------------------------------------------------
# 1790
tmp <- dir_haines %>% paste0("DS0007/02896-0007-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
setdiff(keep_v, names(tmp))
# 1850 through ? (7-?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0007/02896-0007-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# 1850 through ? (7-?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0007/02896-0007-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# 1850 through ? (7-?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0008/02896-0008-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
setdiff(keep_v, names(tmp))
# 1850 through ? (7,9-?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0008/02896-0008-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# 1850 through ? (7,9-?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0009/02896-0009-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
setdiff(keep_v, names(tmp))
tmp
# 1850 through ? (7,9-?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0010/02896-0010-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# 1850 through ? (7,9,11?)
# NOTE: 'fips' and 'statefip' become only 'fips'
tmp <- dir_haines %>% paste0("DS0011/02896-0011-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
setdiff(keep_v, names(tmp))
# Load Haines data -------------------------------------------------------------
# 1790 through 1840 (1-6)
tmp <- dir_haines %>% paste0("DS0001/02896-0001-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setcolorder(tmp, keep_v)
tmp <- tmp[county != 0]
# Load Haines data -------------------------------------------------------------
# 1790 through 1840 (1-6)
h1_dt <- lapply(X = 1:6, FUN = function(i) {
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
tmp <- tmp[county != 0]
}) %>% rbindlist(use.names = T, fill = T)
h1_dt
# Load Haines data -------------------------------------------------------------
# 1790 through 1840 (1-6)
h1_dt <- lapply(X = 1:6, FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
h1_dt
rm(h1_dt)
rm(tmp)
# Load Haines data -------------------------------------------------------------
# 1790 through 1840 (1-6)
h1_dt <- lapply(X = 1:6, FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
h1_dt
# 1850 through 1860 (7 and 9) (8 and 10 are state only)
# NOTE: 'fips' and 'statefip' become only 'fips'
h2_dt <- lapply(X = c(7, 9), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS0007/02896-0007-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
# 1850 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(7, 9), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS0011/02896-0011-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
# 1850 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(11), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS0011/02896-0011-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
i <- 1
i <- 11
# 1850 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(11), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
i
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", "-Data.dta") %>%
read_dta() %>% data.table()
# 1850 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(11), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
# 1850 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(11), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
h3_dt
# Load Haines data -------------------------------------------------------------
# 1790 through 1840 (1-6)
h1_dt <- lapply(X = 1:6, FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
# 1850 through 1860 (7 and 9) (8 and 10 are state only)
# NOTE: 'fips' and 'statefip' become only 'fips'
h2_dt <- lapply(X = c(7, 9), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
# 1870 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(11), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
h1_dt
h2_dt
h3_dt
i
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
setdiff(keep_v, names(tmp))
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "whtot", "cotot",)
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "whtot", "cotot")
tmp[, setdiff(names(tmp), keep_v) := NULL]
setdiff(keep_v, names(tmp))
# Load Haines data -------------------------------------------------------------
# 1790 through 1840 (1-6)
h1_dt <- lapply(X = 1:6, FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips", "statefip",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
# 1850 through 1860 (7 and 9) (8 and 10 are state only)
# NOTE: 'fips' and 'statefip' become only 'fips'
h2_dt <- lapply(X = c(7, 9), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS000", i, "/02896-000", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "wmtot", "wftot", "stot", "smtot", "sftot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
# 1870 through ? (11)
# NOTE: 'fips' and 'statefip' become only 'fips'
h3_dt <- lapply(X = c(11), FUN = function(i) {
# Load data
tmp <- dir_haines %>% paste0("DS00", i, "/02896-00", i, "-Data.dta") %>%
read_dta() %>% data.table()
# Define target variables
keep_v <- c("name", "state", "county", "fips",
"totpop", "urb25", "whtot", "cotot")
# Drop unwanted variables
tmp[, setdiff(names(tmp), keep_v) := NULL]
# Drop aggregates
tmp <- tmp[county != 0]
# Create file variable
tmp[, file := i]
# Return the file
return(tmp)
}) %>% rbindlist(use.names = T, fill = T)
h1_dt
h2_dt
h3_dt
h3_dt[fips == 11000]
h3_dt[fips == "11000]
h3_dt[fips == "11000"]
h3_dt[fips == "11001"]
h2_dt[fips == "11001"]
h2_dt[fips == "11000"]
h3_dt[fips == "11000"]
h2_dt[fips == "9001"]
h3_dt[fips == "9001"]
h2_dt[fips ==
"45019"]
h2_dt[fips == "45019"]
h1_dt[fips == "45019"]
h2_dt[fips == "45019"]
h3_dt[fips == "45019"]
i <- 12
h2_dt[, sum(stot), by = file()]
h2_dt[, sum(stot), by = file]
h2_dt[, sum(stot, na.rm = T), by = file]
h1_dt[, sum(stot, na.rm = T), by = file]
h3_dt[, sum(cotot, na.rm = T)]
library(rmarkdown)
setwd("/Users/edwardarubin/Dropbox/Teaching/ARE212")
render("section06.Rmd",
pdf_document(
latex_engine = "xelatex",
toc = T,
number_sections = T,
highlight = "pygments",
pandoc_args = c(
"--metadata=author:\"Ed Rubin\"",
pandoc_variable_arg("mainfont", "Charter"),
pandoc_variable_arg("monofont", "Hack"),
pandoc_variable_arg("fontsize", "11pt")
)
),
output_dir = "Section06")
cd /Users/edwardarubin/Dropbox/Teaching/ARE212/Spring2017
library(rmarkdown)
setwd("/Users/edwardarubin/Dropbox/Teaching/ARE212Other/ProblemSets2018/PS1Solutions/")
dir()
library(rmarkdown)
setwd("/Users/edwardarubin/Dropbox/Teaching/ARE212Other/ProblemSets2018/PS1Solutions/")
render("problemSet1.Rmd",
pdf_document(
latex_engine = "xelatex",
toc = T,
number_sections = T,
highlight = "pygments",
pandoc_args = c(
"--metadata=author:\"Ed Rubin\"",
pandoc_variable_arg("mainfont", "Charter"),
pandoc_variable_arg("monofont", "Hack"),
pandoc_variable_arg("fontsize", "11pt")
)
),
output_dir = ".")
library(rmarkdown)
setwd("/Users/edwardarubin/Dropbox/Teaching/ARE212")
render("section06.Rmd",
pdf_document(
latex_engine = "xelatex",
toc = T,
number_sections = T,
highlight = "pygments",
pandoc_args = c(
"--metadata=author:\"Ed Rubin\"",
pandoc_variable_arg("mainfont", "Charter"),
pandoc_variable_arg("monofont", "Hack"),
pandoc_variable_arg("fontsize", "11pt")
)
),
output_dir = "Section06")
