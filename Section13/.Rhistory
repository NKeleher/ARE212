values = c(4, 1))
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab, size = as.factor(lab))) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(16, 1)
) +
scale_size_manual(
values = c(4, 1))
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab, size = lab)) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(16, 1)
) +
scale_size_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(4, 1))
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab)) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(16, 1)
)
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab)) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(19, 16)
)
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab)) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(16, 1)
)
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_hline(yintercept = 0, color = "black") +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab)) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(16, 1)
)
tmp <- data.table(
x = 1:length(out$Y.tr) - out$T0,
y = c(out$Y.tr, synth = out$Y.ct),
lab = rep(c("A", "B"), each = length(out$Y.tr)))
ggplot(data = tmp, aes(x = x, y = y)) +
geom_vline(xintercept = 0, color = "grey40", size = 2, alpha = 0.3) +
geom_hline(yintercept = 0, color = "black") +
geom_line(alpha = 0.5, size = 0.3, aes(group = lab), linetype = "dotted", color = "grey40") +
# stat_smooth(aes(color = lab), se = F, alpha = 0.5) +
geom_point(size = 1.5, aes(color = lab, shape = lab)) +
xlab("Weeks to legalization") +
theme_pander() +
scale_color_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c("black", "#f50057")
) +
scale_shape_manual("",
labels = c("Denver, reality", "Denver, synthetic control"),
values = c(16, 1)
)
plot(out)
out
felm(
n_total_incident ~
# log(n_total_incident) ~
# I(1e4 * n_total_incident / pop_total) ~
# log(n_total_incident / pop_total) ~
trt |
city_name + week + year |
0 |
city_name,
data = tmp
# data = tmp[pop_total != 0]
) %>% summary
tmp
# Regression -------------------------------------------------------------------
tmp <- sub_yw[(year(date) >= 2007)]
tmp[, trt := 1 * (date >= ymd(20121101)) & (city_name == "denver")]
tmp[, yw := paste0(year, "_", week)]
tmp[, date_num := unclass(date)]
felm(
n_total_incident ~
# log(n_total_incident) ~
# I(1e4 * n_total_incident / pop_total) ~
# log(n_total_incident / pop_total) ~
trt |
city_name + week + year |
0 |
city_name,
data = tmp
# data = tmp[pop_total != 0]
) %>% summary
out$att.avg
# General R setup ----
# Options
options(stringsAsFactors = F)
# Load new packages
pacman::p_load(lubridate, rgdal, raster, broom, rgeos, GISTools)
# Load old packages
pacman::p_load(dplyr, ggplot2, ggthemes, magrittr, viridis)
# My ggplot2 theme
theme_ed <- theme(
legend.position = "bottom",
panel.background = element_rect(fill = NA),
# panel.border = element_rect(fill = NA, color = "grey75"),
axis.ticks = element_line(color = "grey95", size = 0.3),
panel.grid.major = element_line(color = "grey95", size = 0.3),
panel.grid.minor = element_line(color = "grey95", size = 0.3),
legend.key = element_blank())
# My directory
dir_12 <- "/Users/edwardarubin/Dropbox/Teaching/ARE212/Section12/"
# Loading a shapefile ----
# Load the shapefile with the Chicago beats data
beats_shp <- readOGR(
dsn = paste0(dir_12, "ChicagoPoliceBeats"),
layer = "chiBeats")
beats_shp %>% names
beats_shp %>% slotNames()
beats_shp@data %>% names
beats_shp@data %>% dim
# Options
options(stringsAsFactors = F)
options(scipen = 10)
# Packages
library(pacman)
p_load(readr, dplyr, magrittr, parallel, ggplot2, GGally, tidyr, viridis)
# Directories
dir_212 <- "/Users/edwardarubin/Dropbox/Teaching/ARE212Other/"
dir_ps3 <- dir_212 %>% paste0("ProblemSets2018/PS3Solutions/")
# My ggplot2 theme
theme_ed <- theme(
legend.position = "bottom",
panel.background = element_rect(fill = NA),
# panel.border = element_rect(fill = NA, color = "grey75"),
axis.ticks = element_line(color = "grey95", size = 0.3),
panel.grid.major = element_line(color = "grey95", size = 0.3),
panel.grid.minor = element_line(color = "grey95", size = 0.3),
legend.key = element_blank())
# Read data
wage_df <- paste0(dir_ps3, "nls80.csv") %>% read_csv()
devtools::install_github("ggobi/ggally")
# General R setup ----
# Options
options(stringsAsFactors = F)
# Load new packages
library(pacman)
p_load(ggmap, leaflet)
# Load old packages
p_load(lubridate, rgdal, raster, broom, rgeos, GISTools)
p_load(dplyr, ggplot2, ggthemes, magrittr, viridis)
# My ggplot2 theme
theme_ed <- theme(
legend.position = "bottom",
panel.background = element_rect(fill = NA),
# panel.border = element_rect(fill = NA, color = "grey75"),
axis.ticks = element_line(color = "grey95", size = 0.3),
panel.grid.major = element_line(color = "grey95", size = 0.3),
panel.grid.minor = element_line(color = "grey95", size = 0.3),
legend.key = element_blank())
# My directories
dir_12 <- "/Users/edwardarubin/Dropbox/Teaching/ARE212/Spring2017/Section12/"
dir_12b <- "/Users/edwardarubin/Dropbox/Teaching/ARE212/Spring2017/Section12b/"
# Read the Chicago lights raster
chi_lights <- raster(paste0(dir_12b, "chicagoNightLights.tif"))
# Read the Chicago police beats shapefile
chi_beats <- readOGR(paste0(dir_12, "ChicagoPoliceBeats"), "chiBeats")
plot(chi_lights, col = viridis(1e3))
# Plot the Chicago night lights raster
plot(chi_lights, col = viridis(1e3))
# Plot the police beats over the night lights raster
lines(chi_beats, col = "white", lwd = 0.8)
chi_lights
chi_lights %>% summary()
# The slot names
chi_lights %>% slotNames()
# The first 6 values
chi_lights %>% getValues() %>% head()
# The first six coordinates
chi_lights %>% coordinates() %>% head()
ggplot(data = data.frame(light = getValues(chi_lights)),
aes(x = log(light))) +
geom_histogram(bins = 20, fill = viridis(20)) +
ylab("Count") +
xlab("log(radiance)") +
ggtitle("Distribution of light radiance near Chicago",
subtitle = "January 2017, logged radiance") +
theme_ed
leaflet() %>%
addMarkers(lng = geo_google$lon, lat = geo_google$lat, popup = "Google") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_google$lon, lat = geo_google$lat, zoom = 17)
?geocode
geo_google <- geocode(
"207 Giannini Hall #3310 University of California Berkeley, CA 94720-3310",
output = "more",
source = "google")
geo_google
?geocode
geo_dsk <- geocode(
"207 Giannini Hall #3310 University of California Berkeley, CA 94720-3310",
output = "more",
source = "dsk")
geo_dsk
geo_google
geo_google
geo_dsk
# Geocode with Google
geo_google <- geocode(
"207 Giannini Hall #3310 University of California Berkeley, CA 94720-3310",
output = "more",
source = "google")
# Geocode with DSK
geo_dsk <- geocode(
"207 Giannini Hall #3310 University of California Berkeley, CA 94720-3310",
output = "more",
source = "dsk")
geo_google
geo_dsk
leaflet() %>%
addMarkers(lng = geo_google$lon, lat = geo_google$lat, popup = "Google") %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "DSK") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_google$lon, lat = geo_google$lat, zoom = 17)
leaflet() %>%
addMarkers(lng = geo_google$lon, lat = geo_google$lat, popup = "Google") %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "DSK") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_google$lon, lat = geo_google$lat, zoom = 17)
?addMarkers
leaflet() %>%
addMarkers(
lng = c(geo_google$lon, geo_dsk$lon),
lat = c(geo_google$lat, geo_dsk$lat),
popup = c("Google", "DSK")
) %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_google$lon, lat = geo_google$lat, zoom = 17)
leaflet() %>%
addMarkers(
lng = c(geo_dsk$lon),
lat = c(geo_dsk$lat),
popup = c("DSK")
) %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_google$lon, lat = geo_google$lat, zoom = 17)
geo_dsk
geo_google
leaflet() %>%
addMarkers(lng = geo_google$lon, lat = geo_google$lat, popup = "Google") %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "DSK") %>%
addProviderTiles(providers$OpenStreetMap.HOT)
leaflet() %>%
addMarkers(lng = geo_google$lon, lat = geo_google$lat, popup = "Google") %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "DSK") %>%
addProviderTiles(providers$OpenStreetMap.HOT)
leaflet() %>%
addMarkers(lng = geo_google$lon, lat = geo_google$lat, popup = "Google") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_google$lon, lat = geo_google$lat, zoom = 17)
leaflet() %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "Google") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_dsk$lon, lat = geo_dsk$lat, zoom = 17)
leaflet() %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "Google") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_dsk$lon, lat = geo_dsk$lat, zoom = 15)
leaflet() %>%
addMarkers(lng = geo_dsk$lon, lat = geo_dsk$lat, popup = "Google") %>%
addProviderTiles(providers$OpenStreetMap.HOT) %>%
setView(lng = geo_dsk$lon, lat = geo_dsk$lat, zoom = 12)
m <- leaflet() %>%
addMarkers(lng = -96.6852, lat = 40.8258, popup = "Lincoln, NE") %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 12)
m %>% addProviderTiles(providers$CartoDB)
m %>% addProviderTiles(providers$OpenMapSurfer.Roads)
m %>% addProviderTiles(providers$OpenStreetMap.HOT)
m %>% addProviderTiles(providers$Esri.WorldImagery)
m %>% addProviderTiles(providers$Esri.WorldTerrain) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 4)
m %>% addProviderTiles(providers$NASAGIBS.ViirsEarthAtNight2012) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 4)
providers.details
m %>% addProviderTiles(providers$providers$Thunderforest.Pioneer)
m %>% addProviderTiles(providers$providers$Thunderforest)
m %>% addProviderTiles(providers$Thunderforest.Pioneer)
m %>% addProviderTiles(providers$Stamen.Watercolor)
m %>% addProviderTiles(providers$providers$Thunderforest) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 4)
m %>% addProviderTiles(providers$providers$Thunderforest) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 1)
m %>% addProviderTiles(providers$providers$Thunderforest) %>%
setView(zoom = 1)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(zoom = 1)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 4)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 3)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 6)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m <- leaflet() %>%
addMarkers(lng = -96.6852, lat = 40.8258, popup = "Lincoln, NE", icon = greenLeafIcon) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 12)
greenLeafIcon <- makeIcon(
iconUrl = "http://leafletjs.com/examples/custom-icons/leaf-green.png",
iconWidth = 38, iconHeight = 95,
iconAnchorX = 22, iconAnchorY = 94,
shadowUrl = "http://leafletjs.com/examples/custom-icons/leaf-shadow.png",
shadowWidth = 50, shadowHeight = 64,
shadowAnchorX = 4, shadowAnchorY = 62
)
m <- leaflet() %>%
addMarkers(lng = -96.6852, lat = 40.8258, popup = "Lincoln, NE", icon = greenLeafIcon) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 12)
m %>% addProviderTiles(providers$CartoDB)
m %>% addProviderTiles(providers$OpenMapSurfer.Roads)
m <- leaflet() %>%
addMarkers(lng = -96.6852, lat = 40.8258, popup = "Lincoln, NE") %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 12)
m %>% addProviderTiles(providers$Stamen.TonerLabels) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$Stamen) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$StamenToner) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$MtbMap) %>%
addProviderTiles(providers$Stamen.TonerLines,
options = providerTileOptions(opacity = 0.35)) %>%
addProviderTiles(providers$Stamen.TonerLabels) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$MtbMap) %>%
options = providerTileOptions(opacity = 0.35)) %>%
addProviderTiles(providers$Stamen.TonerLabels) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$MtbMap) %>%
addProviderTiles(providers$Stamen.TonerLabels) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$MtbMap) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$Stamen.Toner) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
providers
m %>% addProviderTiles(providers$OpenWeatherMap.Clouds) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$CartoDB.Positron) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$CartoDB.DarkMatter) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$HERE.pedestrianDay) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$NASAGIBS) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$CartoDB.DarkMatter)
m %>% addProviderTiles(providers$CartoDB.DarkMatter) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
m %>% addProviderTiles(providers$Stamen.Watercolor) %>%
setView(lng = -96.6852, lat = 40.8258, zoom = 5)
getwd()
setwd("Dropbox/Teaching/ARE212/Section13/")
dir()
tmp <- raster("GlobalGWR_PM25_GL_201601_201612-RH35.nc")
install.packages("ncdf4")
tmp <- raster("GlobalGWR_PM25_GL_201601_201612-RH35.nc")
tmp
class(tmp)
tmp@file
tmp %>% slotNames()
chi_lights %>% slotNames()
chi_lights@z
tmp@z
tmp$PM25
tmp@crs
plot(tmp, col = viridis(1e3))
dir()
tmp <- raster("GlobalGWRc_PM25_GL_201601_201612-RH35.nc")
plot(tmp, col = viridis(1e3))
rasterToPoints(tmp) %>% head
ggplot(data = rasterToPoints(tmp), aes(x, y, PM25)) +
geom_raster()
ggplot(data = rasterToPoints(tmp) %>% data.frame(), aes(x, y, PM25)) +
geom_raster()
pm_2010 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201001_201612-RH35.nc") %>%
raster()
dir_13 <- "/Users/edwardarubin/Dropbox/Teaching/ARE212/Section13/"
pm_2010 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201001_201612-RH35.nc") %>%
raster()
dir_13 %>% dir
tmp <- raster("GlobalGWR_PM25_GL_201601_201612-RH35.nc")
tmp <- raster("GlobalGWRc_PM25_GL_201601_201612-RH35.nc")
tmp <- raster("GlobalGWRc_PM25_GL_201601_201612-RH35.nc")
tmp <- raster("GlobalGWRc_PM25_GL_201001_201612-RH35.nc")
dir()
tmp <- raster("GlobalGWRc_PM25_GL_201601_201612-RH35.nc")
tmp <- raster("GlobalGWRc_PM25_GL_201001_201012-RH35.nc")
pm_2010 <- raster("GlobalGWRc_PM25_GL_201001_201612-RH35.nc")
pm_2010 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201001_201612-RH35.nc") %>% raster()
pm_2016 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201601_201612-RH35.nc") %>% raster()
pm_2010 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201001_201612-RH35.nc") %>% raster()
dir_13
dir_13 %>% dir
pm_2010 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201001_201012-RH35.nc") %>% raster()
pm_2016 <- paste0(dir_13, "GlobalGWRc_PM25_GL_201601_201612-RH35.nc") %>% raster()
pm_2010
pm_stack <- paste0(dir_13, c(
"GlobalGWRc_PM25_GL_201001_201012-RH35.nc",
"GlobalGWRc_PM25_GL_201601_201612-RH35.nc")
) %>% raster()
pm_stack <- paste0(dir_13, c(
"GlobalGWRc_PM25_GL_201001_201012-RH35.nc",
"GlobalGWRc_PM25_GL_201601_201612-RH35.nc")
) %>% stack()
pm_stack
pm_stack@z
pm_2010
pm_2016
pm_stack
plot(pm_stack, col = viridis(1e3))
plot(pm_2016, col = viridis(1e3))
pm_2016 - pm_2010
getValues(pm_2016 - pm_2010) %>% summary
plot(pm_2016 - pm_2010, col = viridis(1e3))
?crop()
?crop
plot(pm_2016 - pm_2010)
plot(pm_2016 - pm_2010, col = viridis(1e3))
?crop
